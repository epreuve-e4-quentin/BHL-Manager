<!DOCTYPE html>
<html>

<head>
  <title>BHL Manager</title>
  <script>window.$ = window.jQuery = require('jquery');</script>
  <script src="public/bootstrap-4.3.1/bootstrap.min.js"></script>
  <link rel="stylesheet" href="public/adminNavigation.css">
  <link rel="stylesheet" href="public/bhl-manager.css">

  <link rel="stylesheet" href="public\bootstrap-4.3.1\bootstrap.min.css">
  <script src="public/DataTableV2/datatables.js"></script> <!-- Script pour la librerie DataTable -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">

  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css">
</head>

<body>

  <!-- Sidebar -->
  <!-- Sidebar -->
  <div id="sidebar-wrapper">
    <ul id="sidebar_menu" class="sidebar-nav">

      <li class="sidebar-brand"><a id="menu-toggle" href="#">Admin<span id="main_icon"><i id="toggle_icon"
              class="fa fa-chevron-circle-left"></i></span></a></li>
    </ul>
    <ul class="sidebar-nav" id="sidebar">
      <li><a href="?ctrl=Clothe&method=index"> <span> Gérer les Vêtement </span> <i class="fa fa-cog"></i> </a> </li>
      <li><a href="?ctrl=Clothe&method=add"> <span class='sub-menu'> Créer un vêtement </span> <i
            class="fa fa-plus"></i> </a> </li>
      <li><a href="?ctrl=Category&method=index"> <span> Gérer les catégories </span> <i class="fa fa-cog"></i> </a>
      </li>
      <li><a href="?ctrl=Category&method=add"> <span class='sub-menu'> Créer une catégorie </span> <i
            class="fa fa-plus"></i> </a> </li>
      <li><a href="?ctrl=Client&method=index"> <span> Gérer les clients </span> <i class="fa fa-cog"></i> </a> </li>
      <li><a href="?ctrl=Client&method=add"> <span class='sub-menu'> Ajouter un client </span> <i
            class="fa fa-plus"></i> </a> </li>
      <li><a href="?ctrl=Comment&method=index"> <span> Gérer les commentaires </span> <i class="fa fa-cog"></i> </a>
      </li>
    </ul>
  </div>





  <div id="mainContent"></div>

  <script>

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    var ctrl, method, param;

    if (urlParams.get('ctrl') != null) { var ctrl = urlParams.get('ctrl'); }
    else { var ctrl = 'Client'; }

    if (urlParams.get('method') != null) { var method = urlParams.get('method'); }
    else { var method = 'index'; }

    if (urlParams.get('param') != null) { var param = JSON.parse(urlParams.get('param')); }
    else { var param = []; }


    const electron = require('electron');
    const { ipcRenderer } = electron;
    const View = require('./view/View.js');
    const Database = require('./model/Database.js');
    var database = new Database();

    ctrlFile = "./controller/" + ctrl + "Controller.js";

    const Controller = require(ctrlFile);
    controller = new Controller();

    controller[method].apply(controller, param);

    function goBack() {
      window.history.back();
    }

    function serializeForm(formId) {
      var formArray = $("form#clotheEdit").serializeArray();
      var returnArray = {};
      for (var i = 0; i < formArray.length; i++) {
        returnArray[formArray[i]['name']] = formArray[i]['value'];
      }
      return returnArray;
    }

  </script>
</body>

</html>